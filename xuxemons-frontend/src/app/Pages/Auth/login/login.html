<section class="login-page">
  <form class="login-card" [formGroup]="loginForm" (ngSubmit)="onSubmit()" aria-label="Login form">
    <div class="brand">
      <img src="/icons/logo.svg" class="brand-logo" alt="Xuxemons logo" />
      <h1>Welcome Back</h1>
      <p>Sign in to continue your journey</p>
    </div>

    @if (errorMessage) {
      <p class="error-message" role="alert" aria-live="polite">{{ errorMessage }}</p>
    }

    <div class="form-group">
      <label for="userId" class="label">User ID</label>
      <input
        type="text"
        id="userId"
        formControlName="id"
        placeholder="#NameXXXX"
        class="input"
        [class.input-error]="isFieldInvalid('id')"
        aria-describedby="userId-error"
      />
      @if (isFieldInvalid('id')) {
        <span id="userId-error" class="error-message" aria-live="polite">
          {{ getErrorMessage('id') }}
        </span>
      }
    </div>

    <div class="form-group">
      <label for="loginPassword" class="label">Password</label>
      <div class="password-wrapper">
        <input
          [attr.type]="showPassword ? 'text' : 'password'"
          id="loginPassword"
          formControlName="password"
          placeholder="········"
          class="input"
          [class.input-error]="isFieldInvalid('password')"
          aria-describedby="loginPassword-error"
        />
        <button type="button" class="toggle-password" tabindex="0" (click)="togglePassword()" [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'">
          @if (showPassword) {
            <i class="bi bi-eye-fill" aria-hidden="true"></i>
          } @else {
            <i class="bi bi-eye-slash-fill" aria-hidden="true"></i>
          }
        </button>
      </div>
      @if (isFieldInvalid('password')) {
        <span id="loginPassword-error" class="error-message" aria-live="polite">
          {{ getErrorMessage('password') }}
        </span>
      }
    </div>

    <label class="checkbox-row">
      <input type="checkbox" name="remember" />
      <span>Remember me</span>
    </label>

    <button type="submit" class="btn-primary">Log In</button>

    <p class="register-link">Don't have an account? <a routerLink="/register">Register Now</a></p>
  </form>
</section>
